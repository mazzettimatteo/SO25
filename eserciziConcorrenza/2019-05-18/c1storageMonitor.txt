Esercizio c.1: Una fabbrica usa 16 tipi di componenti (es. ruota telaio scocca sellino catena ....). Ogni volta che occorre
costruire un prodotto occorre prendere dal magazzino le parti necessarie, e.g. per fare un go-kart occorre una scocca e
4 ruote, per fare una bicicletta un telaio, un sellino, 2 ruote e una catena.
Scopo dell'esercizio è di scrivere un monitor storage per la gestione del magazzino (un vettore di 16 interi).
Ogni volta che un magazziere riceve un carico di componenti dal formitori chiama la funzione:
 storage.add(components)
dove components è un vettore di 16 elementi, indica quanti componenti di ogni tipo vengono aggiunti al magazzino.
Quando un operaio deve costruire un prodotto chiama:
 storage.get(components)
dove components è un vettore di 16 elementi: indica quanti componenti di ogni tipo sono necessari per costruire il
prodotto richiesto.
Ovviamente se manca qualche componente occorre aspettare che i magazzinieri ricevano e mettano nel magazzino le
parti mancanti.
Le richieste degli operali devono essere soddisfatte in ordine FIFO.
Ci possono essere casi di Deadlock? e di Starvation? perché?

monitor storage:

int magazzino[16]

struct Request{
    int needed[16]
    condition ready
}
queue of Request reqs

bool canSatisfy(int[] needed){
    for(i=0;i<16;i++){
        if(magazzino[i]<needed[i]){
            return false
        }
    }
    return true
}


storage.add(components){
    //aggiungo i nuovi pezzi
    for(i=0;i<16;i++){
        magazzino[i]+=components[i]
    }
    if(!reqs.isEmpty()){
        Request first=reqs.head()
        if(canSatisfy(first.needed)){
            _=reqs.dequeue()
            first.ready.signal()
        }
    }
}

storage.get(components){
   if(!reqs.isEmpty() || !canSatisfy(components)){
    Request r=new Request
    r.needed=components
    reqs.enqueue(r)
    r.ready.wait()
   }
   //qui o non ci sono richeste o ci sono ma le posso soddisfare
   for(i=0;i<16;i++){
    magazzino[i]-=components[i]
   }

}


Sicuramente questo problema può presentare starvation, ad esempio se il magazzio è vuoto e si fanno delle get e non si fanno mai delle add.
Non penso ci possa essere deadlock